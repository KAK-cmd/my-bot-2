# bot.py - —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–º–µ–Ω
import asyncio
import logging
from datetime import datetime, timedelta
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from config import BOT_TOKEN
from excel_parser import –ü–∞—Ä—Å–µ—Ä–†–∞—Å–ø–∏—Å–∞–Ω–∏—è
from database import db  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ë–î –∏–∑ database.py

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –°–æ–∑–¥–∞–µ–º –±–æ—Ç–∞
bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

# –°–æ–∑–¥–∞–µ–º –ø–∞—Ä—Å–µ—Ä
–ø–∞—Ä—Å–µ—Ä = –ü–∞—Ä—Å–µ—Ä–†–∞—Å–ø–∏—Å–∞–Ω–∏—è()

# ============ –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–Ø–ú–ò ============

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è ID –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è)
–ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–±–æ—Ç–∞ = {}
–ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è = {}

# –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏—Ö –∑–∞–º–µ–Ω–∞x
—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ = False

# ============ –ö–õ–ê–í–ò–ê–¢–£–†–´ ============

def —Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É():
    """–°–æ–∑–¥–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏"""
    keyboard = ReplyKeyboardMarkup(
        keyboard=[
            [
                KeyboardButton(text="üìÖ –°–µ–≥–æ–¥–Ω—è"),
                KeyboardButton(text="üìÖ –ó–∞–≤—Ç—Ä–∞")
            ],
            [
                KeyboardButton(text="üîµ –ß–∏—Å–ª–∏—Ç–µ–ª—å"),
                KeyboardButton(text="üî¥ –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å"),
                KeyboardButton(text="üìä –ò–Ω—Ñ–æ –æ –Ω–µ–¥–µ–ª–µ")
            ],
            [
                KeyboardButton(text="üîÑ –ó–∞–º–µ–Ω—ã"),
                KeyboardButton(text="üîî –†–∞—Å—Å—ã–ª–∫–∞"),
                KeyboardButton(text="‚ùì –ü–æ–º–æ—â—å")
            ],
            [
                KeyboardButton(text="–ü–Ω"),
                KeyboardButton(text="–í—Ç"),
                KeyboardButton(text="–°—Ä"),
                KeyboardButton(text="–ß—Ç"),
                KeyboardButton(text="–ü—Ç"),
                KeyboardButton(text="–°–±"),
                KeyboardButton(text="–í—Å")
            ]
        ],
        resize_keyboard=True,
        input_field_placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É"
    )
    return keyboard

# ============ –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ============

async def —É–¥–∞–ª–∏—Ç—å_–ø—Ä–µ–¥—ã–¥—É—â–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è(chat_id, user_id):
    """–£–¥–∞–ª—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    # –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ (–∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å)
    if user_id in –ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–±–æ—Ç–∞:
        try:
            await bot.delete_message(chat_id=chat_id, message_id=–ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–±–æ—Ç–∞[user_id])
            del –ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–±–æ—Ç–∞[user_id]
        except Exception as e:
            print(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞: {e}")
    
    # –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if user_id in –ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
        try:
            await bot.delete_message(chat_id=chat_id, message_id=–ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è[user_id])
            del –ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è[user_id]
        except Exception as e:
            print(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")

async def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message: types.Message, —Ç–µ–∫—Å—Ç: str, reply_markup=None, save_user_message=True):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–π—Å—Ç–≤–∏–∏"""
    user_id = message.from_user.id
    chat_id = message.chat.id
    
    # –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
    await —É–¥–∞–ª–∏—Ç—å_–ø—Ä–µ–¥—ã–¥—É—â–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è(chat_id, user_id)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –ø–æ–∑–∂–µ)
    if save_user_message:
        –ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è[user_id] = message.message_id
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞
    –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ = await bot.send_message(chat_id, —Ç–µ–∫—Å—Ç, reply_markup=reply_markup)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ (—á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –ø–æ–∑–∂–µ)
    –ø–æ—Å–ª–µ–¥–Ω–∏–µ_—Å–æ–æ–±—â–µ–Ω–∏—è_–±–æ—Ç–∞[user_id] = –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ.message_id
    
    return –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ

async def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–Ω–µ—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message: types.Message, —Ç–µ–∫—Å—Ç: str, reply_markup=None):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ù–ï –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å—Å—è (—Ç–æ–ª—å–∫–æ –¥–ª—è /start)"""
    user_id = message.from_user.id
    chat_id = message.chat.id
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Å–ø–∏—Å–æ–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
    return await bot.send_message(chat_id, —Ç–µ–∫—Å—Ç, reply_markup=reply_markup)

async def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–≤—Å–µ–º(–¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏=None, —Å_–∑–∞–º–µ–Ω–∞–º–∏=True):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –° –£–ß–ï–¢–û–ú –ó–ê–ú–ï–ù"""
    –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ = db.get_all_subscribers()
    
    if not –ø–æ–¥–ø–∏—Å—á–∏–∫–∏:
        print("‚ÑπÔ∏è –ù–µ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏")
        return
    
    # –ü–æ–ª—É—á–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–µ–Ω—å
    if —Å_–∑–∞–º–µ–Ω–∞–º–∏:
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏)
    else:
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–Ω–∞_–¥–µ–Ω—å(–¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏)
    
    for user_id in –ø–æ–¥–ø–∏—Å—á–∏–∫–∏:
        try:
            await bot.send_message(user_id, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
            print(f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id} –Ω–∞ {–¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏ or '—Å–µ–≥–æ–¥–Ω—è'}")
        except Exception as e:
            print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}: {e}")
            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
            db.remove_subscriber(user_id)

# ============ –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ó–ê–ú–ï–ù ============

async def –æ–±–Ω–æ–≤–∏—Ç—å_–∑–∞–º–µ–Ω—ã_–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏():
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–º–µ–Ω—ã (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 14:00 –∏ 18:00)"""
    global —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
    
    while True:
        now = datetime.now()
        current_time = now.time()
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –≤ –Ω–∞—á–∞–ª–µ –¥–Ω—è
        if current_time.hour == 0 and current_time.minute == 0:
            —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ = False
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, 14:00 –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–º–µ–Ω
        if current_time.hour == 14 and current_time.minute == 0:
            print(f"üîÑ {now.strftime('%H:%M')} - –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–º–µ–Ω!")
            
            try:
                —É—Å–ø–µ—Ö = await –ø–∞—Ä—Å–µ—Ä.–æ–±–Ω–æ–≤–∏—Ç—å_–∑–∞–º–µ–Ω—ã()
                if —É—Å–ø–µ—Ö and –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã():
                    print("‚úÖ –ó–∞–º–µ–Ω—ã –Ω–∞–π–¥–µ–Ω—ã! –û—Ç–ø—Ä–∞–≤–ª—è—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ...")
                    
                    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏—Ö –∑–∞–º–µ–Ω–∞x
                    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ_–∑–∞–º–µ–Ω–∞—Ö()
                else:
                    print("‚ÑπÔ∏è –ó–∞–º–µ–Ω –¥–ª—è –Ω–∞—à–µ–π –≥—Ä—É–ø–ø—ã –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–º–µ–Ω: {e}")
            
            # –ñ–¥–µ–º 61 —Å–µ–∫—É–Ω–¥—É
            await asyncio.sleep(61)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, 18:00 –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–º–µ–Ω
        elif current_time.hour == 18 and current_time.minute == 0:
            print(f"üîÑ {now.strftime('%H:%M')} - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–º–µ–Ω!")
            
            try:
                —É—Å–ø–µ—Ö = await –ø–∞—Ä—Å–µ—Ä.–æ–±–Ω–æ–≤–∏—Ç—å_–∑–∞–º–µ–Ω—ã()
                if —É—Å–ø–µ—Ö and –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã() and not —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:
                    print("‚úÖ –ó–∞–º–µ–Ω—ã –Ω–∞–π–¥–µ–Ω—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ! –û—Ç–ø—Ä–∞–≤–ª—è—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ...")
                    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ_–∑–∞–º–µ–Ω–∞—Ö()
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ: {e}")
            
            await asyncio.sleep(61)
        
        await asyncio.sleep(30)

async def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ_–∑–∞–º–µ–Ω–∞—Ö():
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–≤—Ç—Ä–∞—à–Ω–∏—Ö –∑–∞–º–µ–Ω–∞x"""
    global —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
    
    –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ = db.get_all_subscribers()
    
    if not –ø–æ–¥–ø–∏—Å—á–∏–∫–∏:
        return
    
    if —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:
        print("‚ÑπÔ∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–º–µ–Ω–∞x —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è")
        return
    
    —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω()
    
    for user_id in –ø–æ–¥–ø–∏—Å—á–∏–∫–∏:
        try:
            —Å–æ–æ–±—â–µ–Ω–∏–µ = f"‚ö†Ô∏è **–í–ê–ñ–ù–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï!** ‚ö†Ô∏è\n\n"
            —Å–æ–æ–±—â–µ–Ω–∏–µ += f"–ù–∞ –∑–∞–≤—Ç—Ä–∞ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏!\n\n"
            —Å–æ–æ–±—â–µ–Ω–∏–µ += —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω
            —Å–æ–æ–±—â–µ–Ω–∏–µ += f"\n\n–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –∑–∞–º–µ–Ω–∞–º–∏, –Ω–∞–∂–º–∏—Ç–µ 'üìÖ –ó–∞–≤—Ç—Ä–∞'"
            
            await bot.send_message(user_id, —Å–æ–æ–±—â–µ–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
            print(f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–º–µ–Ω–∞x –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}")
        except Exception as e:
            print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_id}: {e}")
            db.remove_subscriber(user_id)
    
    —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ_–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ = True

async def –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫_—Ä–∞—Å—Å—ã–ª–∫–∏():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –≤ 7:00"""
    while True:
        now = datetime.now()
        current_time = now.time()
        current_weekday = now.weekday()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, 7:00 —É—Ç—Ä–∞
        if current_time.hour == 7 and current_time.minute == 0:
            print(f"‚è∞ {now.strftime('%H:%M %A')} - –í—Ä–µ–º—è —É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞—Å—Å—ã–ª–∫–∏!")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∑–∞–º–µ–Ω—ã –¥–ª—è —Å–µ–≥–æ–¥–Ω—è
            –µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã = –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã()
            
            if –µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã:
                print("üì¢ –û—Ç–ø—Ä–∞–≤–ª—è—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –° –ó–ê–ú–ï–ù–ê–ú–ò")
                # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –∑–∞–º–µ–Ω–∞–º–∏
                await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–≤—Å–µ–º(—Å_–∑–∞–º–µ–Ω–∞–º–∏=True)
            else:
                print("üìÖ –û—Ç–ø—Ä–∞–≤–ª—è—é –æ–±—ã—á–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ")
                # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏ = –ø–∞—Ä—Å–µ—Ä.–¥–Ω–∏_–Ω–µ–¥–µ–ª–∏[current_weekday]
                await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–≤—Å–µ–º(–¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏, —Å_–∑–∞–º–µ–Ω–∞–º–∏=False)
            
            await asyncio.sleep(61)
        
        await asyncio.sleep(30)

# ============ –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –î–ê–¢ ============

def –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏(–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞—Ç—É –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ (–±–ª–∏–∂–∞–π—à–µ–≥–æ –±—É–¥—É—â–µ–≥–æ) —Å —É—á–µ—Ç–æ–º –º–µ—Å—è—Ü–∞"""
    —Å–µ–≥–æ–¥–Ω—è = datetime.now()
    —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–Ω–æ–º–µ—Ä = —Å–µ–≥–æ–¥–Ω—è.weekday()
    
    # –°–ª–æ–≤–∞—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –¥–Ω–µ–π –Ω–æ–º–µ—Ä–∞–º
    –¥–Ω–∏_–Ω–æ–º–µ—Ä–∞ = {
        "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫": 0,
        "–≤—Ç–æ—Ä–Ω–∏–∫": 1,
        "—Å—Ä–µ–¥–∞": 2,
        "—á–µ—Ç–≤–µ—Ä–≥": 3,
        "–ø—è—Ç–Ω–∏—Ü–∞": 4,
        "—Å—É–±–±–æ—Ç–∞": 5,
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ": 6
    }
    
    # –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ –∏—â–µ–º –Ω–æ–º–µ—Ä
    –Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è_–Ω–∏–∂ = –Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è.lower()
    if –Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è_–Ω–∏–∂ in –¥–Ω–∏_–Ω–æ–º–µ—Ä–∞:
        –Ω—É–∂–Ω—ã–π_–Ω–æ–º–µ—Ä = –¥–Ω–∏_–Ω–æ–º–µ—Ä–∞[–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è_–Ω–∏–∂]
    else:
        # –ï—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–ü–Ω, –í—Ç –∏ —Ç.–¥.)
        –∫–æ—Ä–æ—Ç–∫–∏–µ_–¥–Ω–∏ = {
            "–ø–Ω": 0, "–ø–Ω–¥": 0, "–ø–æ–Ω": 0,
            "–≤—Ç": 1, "–≤—Ç—Ä": 1,
            "—Å—Ä": 2, "—Å—Ä–¥": 2,
            "—á—Ç": 3, "—á—Ç–≤": 3,
            "–ø—Ç": 4, "–ø—Ç–Ω": 4,
            "—Å–±": 5, "—Å–±—Ç": 5,
            "–≤—Å": 6, "–≤—Å–∫": 6
        }
        –Ω—É–∂–Ω—ã–π_–Ω–æ–º–µ—Ä = –∫–æ—Ä–æ—Ç–∫–∏–µ_–¥–Ω–∏.get(–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è_–Ω–∏–∂, —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–Ω–æ–º–µ—Ä)
    
    # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –≤ –¥–Ω—è—Ö
    —Ä–∞–∑–Ω–∏—Ü–∞ = –Ω—É–∂–Ω—ã–π_–Ω–æ–º–µ—Ä - —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–Ω–æ–º–µ—Ä
    if —Ä–∞–∑–Ω–∏—Ü–∞ <= 0:
        —Ä–∞–∑–Ω–∏—Ü–∞ += 7  # –ï—Å–ª–∏ –¥–µ–Ω—å —É–∂–µ –ø—Ä–æ—à–µ–ª –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ, –±–µ—Ä–µ–º —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é
    
    # –í—ã—á–∏—Å–ª—è–µ–º –¥–∞—Ç—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º timedelta - –æ–Ω —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –º–µ—Å—è—Ü–∞–º–∏
    –¥–∞—Ç–∞_—Ä–µ–∑—É–ª—å—Ç–∞—Ç = —Å–µ–≥–æ–¥–Ω—è + timedelta(days=—Ä–∞–∑–Ω–∏—Ü–∞)
    
    return –¥–∞—Ç–∞_—Ä–µ–∑—É–ª—å—Ç–∞—Ç

def –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è(–≤—Ö–æ–¥–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ):
    """–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è –≤ –ø–æ–ª–Ω–æ–µ"""
    –¥–Ω–∏_—Å–ª–æ–≤–∞—Ä—å = {
        "–ø–Ω": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
        "–ø–æ–Ω": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
        "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
        "–≤—Ç": "–í—Ç–æ—Ä–Ω–∏–∫",
        "–≤—Ç—Ä": "–í—Ç–æ—Ä–Ω–∏–∫",
        "–≤—Ç–æ—Ä–Ω–∏–∫": "–í—Ç–æ—Ä–Ω–∏–∫",
        "—Å—Ä": "–°—Ä–µ–¥–∞",
        "—Å—Ä–¥": "–°—Ä–µ–¥–∞",
        "—Å—Ä–µ–¥–∞": "–°—Ä–µ–¥–∞",
        "—á—Ç": "–ß–µ—Ç–≤–µ—Ä–≥",
        "—á—Ç–≤": "–ß–µ—Ç–≤–µ—Ä–≥",
        "—á–µ—Ç–≤–µ—Ä–≥": "–ß–µ—Ç–≤–µ—Ä–≥",
        "–ø—Ç": "–ü—è—Ç–Ω–∏—Ü–∞",
        "–ø—Ç–Ω": "–ü—è—Ç–Ω–∏—Ü–∞",
        "–ø—è—Ç–Ω–∏—Ü–∞": "–ü—è—Ç–Ω–∏—Ü–∞",
        "—Å–±": "–°—É–±–±–æ—Ç–∞",
        "—Å–±—Ç": "–°—É–±–±–æ—Ç–∞",
        "—Å—É–±–±–æ—Ç–∞": "–°—É–±–±–æ—Ç–∞",
        "–≤—Å": "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ",
        "–≤—Å–∫": "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ",
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ": "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"
    }
    
    return –¥–Ω–∏_—Å–ª–æ–≤–∞—Ä—å.get(–≤—Ö–æ–¥–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ.lower(), –≤—Ö–æ–¥–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ)

# ============ –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –ó–ê–ú–ï–ù–ê–ú–ò ============

def –ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–≤—Å–µ—Ö_–∑–∞–º–µ–Ω():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ –≤—Å–µ–º–∏ –∑–∞–º–µ–Ω–∞–º–∏ (—Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞)"""
    —Å–µ–≥–æ–¥–Ω—è_–¥–∞—Ç–∞ = datetime.now()
    –∑–∞–≤—Ç—Ä–∞_–¥–∞—Ç–∞ = —Å–µ–≥–æ–¥–Ω—è_–¥–∞—Ç–∞ + timedelta(days=1)
    
    —Ç–µ–∫—Å—Ç = "üîÑ **–ó–ê–ú–ï–ù–´ –ù–ê –°–ï–ì–û–î–ù–Ø –ò –ó–ê–í–¢–†–ê**\n\n"
    
    # –ó–∞–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
    —Ç–µ–∫—Å—Ç += f"üìÖ **–°–ï–ì–û–î–ù–Ø ({—Å–µ–≥–æ–¥–Ω—è_–¥–∞—Ç–∞.strftime('%d.%m.%Y')})**:\n"
    if not –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã():
        —Ç–µ–∫—Å—Ç += "üìù –ù–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–º–µ–Ω –Ω–µ—Ç\n\n"
    else:
        —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω()
        # –£–±–∏—Ä–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∑–∞–º–µ–Ω
        if —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω.startswith("üîÑ **–ó–ê–ú–ï–ù–´ –ù–ê"):
            lines = —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω.split('\n')
            if len(lines) > 2:
                —Ç–µ–∫—Å—Ç += '\n'.join(lines[2:]) + "\n\n"
            else:
                —Ç–µ–∫—Å—Ç += "‚úÖ –ï—Å—Ç—å –∑–∞–º–µ–Ω—ã\n\n"
        else:
            —Ç–µ–∫—Å—Ç += —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω + "\n\n"
    
    # –ó–∞–º–µ–Ω—ã –Ω–∞ –∑–∞–≤—Ç—Ä–∞
    —Ç–µ–∫—Å—Ç += f"üìÖ **–ó–ê–í–¢–†–ê ({–∑–∞–≤—Ç—Ä–∞_–¥–∞—Ç–∞.strftime('%d.%m.%Y')})**:\n"
    # –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –∑–∞–º–µ–Ω—ã –Ω–∞ —Å–∞–π—Ç–µ - —ç—Ç–æ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
    if not –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã():
        —Ç–µ–∫—Å—Ç += "üìù –ù–∞ –∑–∞–≤—Ç—Ä–∞ –∑–∞–º–µ–Ω –ø–æ–∫–∞ –Ω–µ—Ç\n\n"
    else:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ –∑–∞–º–µ–Ω—ã, —á—Ç–æ –∏ –¥–ª—è —Å–µ–≥–æ–¥–Ω—è
        # (–Ω–∞ —Å–∞–π—Ç–µ sttec –æ–±—ã—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–º–µ–Ω—ã –Ω–∞ –∑–∞–≤—Ç—Ä–∞)
        —Ç–µ–∫—Å—Ç += "‚ö†Ô∏è –ï—Å—Ç—å –∑–∞–º–µ–Ω—ã! –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã—à–µ\n\n"
    
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
    if –ø–∞—Ä—Å–µ—Ä.–≤—Ä–µ–º—è_–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
        –≤—Ä–µ–º—è = –ø–∞—Ä—Å–µ—Ä.–≤—Ä–µ–º—è_–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.strftime('%H:%M')
        —Ç–µ–∫—Å—Ç += f"üïê –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: {–≤—Ä–µ–º—è}"
    else:
        —Ç–µ–∫—Å—Ç += "‚ÑπÔ∏è –ó–∞–º–µ–Ω—ã –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å"
    
    return —Ç–µ–∫—Å—Ç

# ============ –ö–û–ú–ê–ù–î–´ –ë–û–¢–ê ============

@dp.message(Command("start"))
async def start_cmd(message: types.Message):
    """–ö–æ–º–∞–Ω–¥–∞ /start - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫"""
    user_id = message.from_user.id
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    db.add_subscriber(
        user_id=user_id,
        username=message.from_user.username,
        first_name=message.from_user.first_name,
        last_name=message.from_user.last_name
    )
    
    # –£–¥–∞–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É /start –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    try:
        await bot.delete_message(chat_id=message.chat.id, message_id=message.message_id)
    except:
        pass

    # –°–æ–∑–¥–∞–µ–º –∫–æ—Ä–æ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    –∑–∞–≥–æ–ª–æ–≤–æ–∫ = f"–ü—Ä–∏–≤–µ—Ç —è –±–æ—Ç —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ\n–ß–µ–º —è –º–æ–≥—É —Ç–µ–±–µ –ø–æ–º–æ—á—å?"
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ - –ù–ï –£–î–ê–õ–Ø–ï–¢–°–Ø
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–Ω–µ—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(
        message,
        –∑–∞–≥–æ–ª–æ–≤–æ–∫,
        reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É()
    )

@dp.message(Command("help"))
async def help_cmd(message: types.Message):
    —Ç–µ–∫—Å—Ç = (
        "üìö **–ü–æ–º–æ—â—å –ø–æ –∫–æ–º–∞–Ω–¥–∞–º:**\n\n"
        "üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É –∏–ª–∏ –∫–æ–º–∞–Ω–¥—ã:\n"
        "/today - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (—Å –∑–∞–º–µ–Ω–∞–º–∏)\n"
        "/tomorrow - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n"
        "/week - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–µ\n"
        "/replacements - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞\n"
        "/update - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–º–µ–Ω—ã –≤—Ä—É—á–Ω—É—é\n"
        "/numer - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —á–∏—Å–ª–∏—Ç–µ–ª—è\n"
        "/denom - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—è\n"
        "/subscribe - –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É\n"
        "/unsubscribe - –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏\n\n"
        "üîî **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞:**\n"
        "‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 7:00 - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –°–ï–ì–û–î–ù–Ø–®–ù–ò–ô –¥–µ–Ω—å (—Å –∑–∞–º–µ–Ω–∞–º–∏)\n"
        "‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 14:00 - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å—ã–ª–∫–∞ –∑–∞–º–µ–Ω\n"
        "**–ö–Ω–æ–ø–∫–∏:**\n"
        "‚Ä¢ üìÖ –°–µ–≥–æ–¥–Ω—è/–ó–∞–≤—Ç—Ä–∞ - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ\n"
        "‚Ä¢ üîµ –ß–∏—Å–ª–∏—Ç–µ–ª—å/üî¥ –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–∫–∞–∑\n"
        "‚Ä¢ üìä –ò–Ω—Ñ–æ –æ –Ω–µ–¥–µ–ª–µ - –¥–µ—Ç–∞–ª–∏ –Ω–µ–¥–µ–ª–∏\n"
        "‚Ä¢ üîÑ –ó–∞–º–µ–Ω—ã - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞\n"
        "‚Ä¢ üîî –†–∞—Å—Å—ã–ª–∫–∞ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π\n"
        "‚Ä¢ –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å"
    )
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("today"))
async def today_cmd(message: types.Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –° –£–ß–ï–¢–û–ú –ó–ê–ú–ï–ù"""
    —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏()
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("tomorrow"))
async def tomorrow_cmd(message: types.Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –° –£–ß–ï–¢–û–ú –ó–ê–ú–ï–ù"""
    # –ü–æ–ª—É—á–∞–µ–º –∑–∞–≤—Ç—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å
    –¥–Ω–∏ = –ø–∞—Ä—Å–µ—Ä.–¥–Ω–∏_–Ω–µ–¥–µ–ª–∏
    —Å–µ–≥–æ–¥–Ω—è = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
    
    –Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è = None
    for –Ω–æ–º–µ—Ä, –¥–µ–Ω—å in –¥–Ω–∏.items():
        if –¥–µ–Ω—å == —Å–µ–≥–æ–¥–Ω—è:
            –Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è = –Ω–æ–º–µ—Ä
            break
    
    if –Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è is not None:
        –∑–∞–≤—Ç—Ä–∞_–Ω–æ–º–µ—Ä = (–Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è + 1) % 7
        –∑–∞–≤—Ç—Ä–∞_–¥–µ–Ω—å = –¥–Ω–∏.get(–∑–∞–≤—Ç—Ä–∞_–Ω–æ–º–µ—Ä, "–ó–∞–≤—Ç—Ä–∞")
        
        # –ü–æ–ª—É—á–∞–µ–º –¥–∞—Ç—É –∑–∞–≤—Ç—Ä–∞ (timedelta —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –º–µ—Å—è—Ü–∞)
        –∑–∞–≤—Ç—Ä–∞_–¥–∞—Ç–∞ = datetime.now() + timedelta(days=1)
        
        # –ü–æ–ª—É—á–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ —Å –∑–∞–º–µ–Ω–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∞—Ç–æ–π
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–∑–∞–≤—Ç—Ä–∞_–¥–µ–Ω—å, –¥–ª—è_–¥–∞—Ç—ã=–∑–∞–≤—Ç—Ä–∞_–¥–∞—Ç–∞)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    else:
        —Ç–µ–∫—Å—Ç = "‚ùå –ù–µ –º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–≤—Ç—Ä–∞"
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("week"))
async def week_cmd(message: types.Message):
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–µ"""
    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é_–æ_–Ω–µ–¥–µ–ª–µ()
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("numer"))
async def numer_cmd(message: types.Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —á–∏—Å–ª–∏—Ç–µ–ª—è"""
    –¥–µ–Ω—å = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
    —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ(–¥–µ–Ω—å, "—á–∏—Å–ª–∏—Ç–µ–ª—å")
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("denom"))
async def denom_cmd(message: types.Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—è"""
    –¥–µ–Ω—å = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
    —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ(–¥–µ–Ω—å, "–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å")
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("replacements"))
@dp.message(Command("zamen"))
@dp.message(Command("–∑–∞–º–µ–Ω—ã"))
async def replacements_cmd(message: types.Message):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞"""
    —Ç–µ–∫—Å—Ç = –ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–≤—Å–µ—Ö_–∑–∞–º–µ–Ω()
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("update"))
async def update_replacements_cmd(message: types.Message):
    """–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ–Ω"""
    await message.answer("üîÑ –û–±–Ω–æ–≤–ª—è—é –∑–∞–º–µ–Ω—ã...")
    
    try:
        —É—Å–ø–µ—Ö = await –ø–∞—Ä—Å–µ—Ä.–æ–±–Ω–æ–≤–∏—Ç—å_–∑–∞–º–µ–Ω—ã()
        if —É—Å–ø–µ—Ö:
            if –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã():
                —Ç–µ–∫—Å—Ç = "‚úÖ –ó–∞–º–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!\n\n"
            else:
                —Ç–µ–∫—Å—Ç = "‚úÖ –ó–∞–º–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã. –î–ª—è –Ω–∞—à–µ–π –≥—Ä—É–ø–ø—ã –∑–∞–º–µ–Ω –Ω–µ—Ç.\n\n"
        else:
            —Ç–µ–∫—Å—Ç = "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–º–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–∞–π—Ç–æ–º.\n\n"
    except Exception as e:
        —Ç–µ–∫—Å—Ç = f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–º–µ–Ω: {e}\n\n"
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–º–µ–Ω–∞x
    —Ç–µ–∫—Å—Ç += –ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–≤—Å–µ—Ö_–∑–∞–º–µ–Ω()
    
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("subscribe"))
async def subscribe_cmd(message: types.Message):
    """–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É"""
    user_id = message.from_user.id
    
    # –î–æ–±–∞–≤–ª—è–µ–º –≤ –ë–î
    db.add_subscriber(
        user_id=user_id,
        username=message.from_user.username,
        first_name=message.from_user.first_name,
        last_name=message.from_user.last_name
    )
    
    —Ç–µ–∫—Å—Ç = (
        "‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É!\n\n"
        "‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 7:00 —É—Ç—Ä–∞.\n\n"
        "üìÖ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –°–ï–ì–û–î–ù–Ø–®–ù–ò–ô –¥–µ–Ω—å.\n"
        "üîÑ –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–º–µ–Ω—ã - –æ–Ω–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—á—Ç–µ–Ω—ã!"
    )
    
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

@dp.message(Command("unsubscribe"))
async def unsubscribe_cmd(message: types.Message):
    """–û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫—É"""
    user_id = message.from_user.id
    
    # –£–¥–∞–ª—è–µ–º –∏–∑ –ë–î
    if db.remove_subscriber(user_id):
        —Ç–µ–∫—Å—Ç = "ü•∫ –í—ã –æ—Ç–ø–∏—Å–∞–ª–∏—Å—å –æ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏.\n\nüîî –ß—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ 7:00, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /subscribe"
    else:
        —Ç–µ–∫—Å—Ç = "‚ÑπÔ∏è –í—ã –Ω–µ –±—ã–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É."
    
    await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

# ============ –û–ë–†–ê–ë–û–¢–ö–ê –ö–ù–û–ü–û–ö ============

@dp.message()
async def text_handler(message: types.Message):
    —Ç–µ–∫—Å—Ç = message.text.lower()
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üîÑ –ó–∞–º–µ–Ω—ã"
    if —Ç–µ–∫—Å—Ç == "üîÑ –∑–∞–º–µ–Ω—ã" or —Ç–µ–∫—Å—Ç == "–∑–∞–º–µ–Ω—ã":
        —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç = –ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–≤—Å–µ—Ö_–∑–∞–º–µ–Ω()
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
        return
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üîî –†–∞—Å—Å—ã–ª–∫–∞"
    elif —Ç–µ–∫—Å—Ç == "üîî —Ä–∞—Å—Å—ã–ª–∫–∞" or "—Ä–∞—Å—Å—ã–ª–∫–∞" in —Ç–µ–∫—Å—Ç:
        user_id = message.from_user.id
        if db.is_subscriber(user_id):
            –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ = db.get_subscribers_count()
            —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç = (
                f"üîî **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–æ–π**\n\n"
                f"‚úÖ –í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É.\n\n"
                f"üë• –í—Å–µ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: {–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ}\n\n"
                f"‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ 7:00 —É—Ç—Ä–∞:\n"
                f"‚Ä¢ –° –ó–ê–ú–ï–ù–ê–ú–ò (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–ª–∏ –æ–±—ã—á–Ω–æ–µ\n"
                f"‚Ä¢ –í 14:00 - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏—Ö –∑–∞–º–µ–Ω–∞x\n"
                f"–ß—Ç–æ–±—ã –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è: /unsubscribe"
            )
        else:
            —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç = (
                "üîî **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–æ–π**\n\n"
                "‚ùå –í—ã –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É.\n\n"
                "–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!\n\n"
                "–ß—Ç–æ–±—ã –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è: /subscribe"
            )
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
        return
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "‚ùì –ü–æ–º–æ—â—å" - —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /help
    elif —Ç–µ–∫—Å—Ç == "‚ùì –ø–æ–º–æ—â—å" or —Ç–µ–∫—Å—Ç == "–ø–æ–º–æ—â—å":
        await help_cmd(message)  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
        return
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üìÖ –°–µ–≥–æ–¥–Ω—è"
    elif —Ç–µ–∫—Å—Ç == "üìÖ —Å–µ–≥–æ–¥–Ω—è" or —Ç–µ–∫—Å—Ç == "—Å–µ–≥–æ–¥–Ω—è":
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏()
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üìÖ –ó–∞–≤—Ç—Ä–∞"
    elif —Ç–µ–∫—Å—Ç == "üìÖ –∑–∞–≤—Ç—Ä–∞" or —Ç–µ–∫—Å—Ç == "–∑–∞–≤—Ç—Ä–∞":
        –¥–Ω–∏ = –ø–∞—Ä—Å–µ—Ä.–¥–Ω–∏_–Ω–µ–¥–µ–ª–∏
        —Å–µ–≥–æ–¥–Ω—è = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
        
        –Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è = None
        for –Ω–æ–º–µ—Ä, –¥–µ–Ω—å in –¥–Ω–∏.items():
            if –¥–µ–Ω—å == —Å–µ–≥–æ–¥–Ω—è:
                –Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è = –Ω–æ–º–µ—Ä
                break
        
        if –Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è is not None:
            –∑–∞–≤—Ç—Ä–∞_–Ω–æ–º–µ—Ä = (–Ω–æ–º–µ—Ä_—Å–µ–≥–æ–¥–Ω—è + 1) % 7
            –∑–∞–≤—Ç—Ä–∞_–¥–µ–Ω—å = –¥–Ω–∏.get(–∑–∞–≤—Ç—Ä–∞_–Ω–æ–º–µ—Ä, "–ó–∞–≤—Ç—Ä–∞")
            
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞—Ç—É –∑–∞–≤—Ç—Ä–∞ (timedelta —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –º–µ—Å—è—Ü–∞)
            –∑–∞–≤—Ç—Ä–∞_–¥–∞—Ç–∞ = datetime.now() + timedelta(days=1)
            
            # –ü–æ–ª—É—á–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ —Å –∑–∞–º–µ–Ω–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∞—Ç–æ–π
            —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–∑–∞–≤—Ç—Ä–∞_–¥–µ–Ω—å, –¥–ª—è_–¥–∞—Ç—ã=–∑–∞–≤—Ç—Ä–∞_–¥–∞—Ç–∞)
            await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
        else:
            await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, "‚ùå –ù–µ –º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–≤—Ç—Ä–∞", reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üîµ –ß–∏—Å–ª–∏—Ç–µ–ª—å"
    elif —Ç–µ–∫—Å—Ç == "üîµ —á–∏—Å–ª–∏—Ç–µ–ª—å" or —Ç–µ–∫—Å—Ç == "—á–∏—Å–ª–∏—Ç–µ–ª—å":
        –¥–µ–Ω—å = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ(–¥–µ–Ω—å, "—á–∏—Å–ª–∏—Ç–µ–ª—å")
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üî¥ –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å"
    elif —Ç–µ–∫—Å—Ç == "üî¥ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å" or —Ç–µ–∫—Å—Ç == "–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å":
        –¥–µ–Ω—å = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ(–¥–µ–Ω—å, "–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å")
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "üìä –ò–Ω—Ñ–æ –æ –Ω–µ–¥–µ–ª–µ"
    elif —Ç–µ–∫—Å—Ç == "üìä –∏–Ω—Ñ–æ –æ –Ω–µ–¥–µ–ª–µ" or "–Ω–µ–¥–µ–ª—è" in —Ç–µ–∫—Å—Ç:
        –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é_–æ_–Ω–µ–¥–µ–ª–µ()
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    # –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏) - —Ç–µ–ø–µ—Ä—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏!
    elif —Ç–µ–∫—Å—Ç == "–ø–Ω" or "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞
        –¥–∞—Ç–∞_–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    elif —Ç–µ–∫—Å—Ç == "–≤—Ç" or "–≤—Ç–æ—Ä–Ω–∏–∫" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è –≤—Ç–æ—Ä–Ω–∏–∫–∞
        –¥–∞—Ç–∞_–≤—Ç–æ—Ä–Ω–∏–∫ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("–≤—Ç–æ—Ä–Ω–∏–∫")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("–≤—Ç–æ—Ä–Ω–∏–∫")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_–≤—Ç–æ—Ä–Ω–∏–∫)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    elif —Ç–µ–∫—Å—Ç == "—Å—Ä" or "—Å—Ä–µ–¥–∞" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è —Å—Ä–µ–¥—ã
        –¥–∞—Ç–∞_—Å—Ä–µ–¥–∞ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("—Å—Ä–µ–¥–∞")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("—Å—Ä–µ–¥–∞")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_—Å—Ä–µ–¥–∞)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    elif —Ç–µ–∫—Å—Ç == "—á—Ç" or "—á–µ—Ç–≤–µ—Ä–≥" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è —á–µ—Ç–≤–µ—Ä–≥–∞
        –¥–∞—Ç–∞_—á–µ—Ç–≤–µ—Ä–≥ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("—á–µ—Ç–≤–µ—Ä–≥")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("—á–µ—Ç–≤–µ—Ä–≥")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_—á–µ—Ç–≤–µ—Ä–≥)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    elif —Ç–µ–∫—Å—Ç == "–ø—Ç" or "–ø—è—Ç–Ω–∏—Ü–∞" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è –ø—è—Ç–Ω–∏—Ü—ã
        –¥–∞—Ç–∞_–ø—è—Ç–Ω–∏—Ü–∞ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("–ø—è—Ç–Ω–∏—Ü–∞")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("–ø—è—Ç–Ω–∏—Ü–∞")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_–ø—è—Ç–Ω–∏—Ü–∞)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    elif —Ç–µ–∫—Å—Ç == "—Å–±" or "—Å—É–±–±–æ—Ç–∞" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è —Å—É–±–±–æ—Ç—ã
        –¥–∞—Ç–∞_—Å—É–±–±–æ—Ç–∞ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("—Å—É–±–±–æ—Ç–∞")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("—Å—É–±–±–æ—Ç–∞")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_—Å—É–±–±–æ—Ç–∞)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    elif —Ç–µ–∫—Å—Ç == "–≤—Å" or "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ" in —Ç–µ–∫—Å—Ç:
        # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
        –¥–∞—Ç–∞_–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ = –ø–æ–ª—É—á–∏—Ç—å_–¥–∞—Ç—É_–¥–ª—è_–¥–Ω—è_–Ω–µ–¥–µ–ª–∏("–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ")
        –ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ = –ø–æ–ª—É—á–∏—Ç—å_–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–¥–Ω—è("–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ")
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏(–ø–æ–ª–Ω–æ–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª—è_–¥–∞—Ç—ã=–¥–∞—Ç–∞_–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
    elif "–ø–∞—Ä—ã" in —Ç–µ–∫—Å—Ç or "—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ" in —Ç–µ–∫—Å—Ç:
        —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏()
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())
    
    else:
        —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç = (
            "ü§î –ù–µ –ø–æ–Ω—è–ª –∑–∞–ø—Ä–æ—Å.\n\n"
            "üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ:\n"
            "/today - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (—Å –∑–∞–º–µ–Ω–∞–º–∏)\n"
            "/tomorrow - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n"
            "/week - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–µ\n"
            "/replacements - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞\n"
            "/update - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–º–µ–Ω—ã –≤—Ä—É—á–Ω—É—é\n"
            "/numer - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —á–∏—Å–ª–∏—Ç–µ–ª—è\n"
            "/denom - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—è\n"
            "/subscribe - –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É\n"
            "/unsubscribe - –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏\n\n"
            )
        await –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_—É–¥–∞–ª—è–µ–º–æ–µ_—Å–æ–æ–±—â–µ–Ω–∏–µ(message, —Ç–µ–∫—Å—Ç_–æ—Ç–≤–µ—Ç, reply_markup=—Å–æ–∑–¥–∞—Ç—å_–æ—Å–Ω–æ–≤–Ω—É—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É())

# ============ –î–û–ë–ê–í–õ–ï–ù–û –î–õ–Ø RAILWAY ============

import signal
import sys

def signal_handler(signum, frame):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è"""
    print("\nüì§ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞...")
    sys.exit(0)

# –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
signal.signal(signal.SIGTERM, signal_handler)
signal.signal(signal.SIGINT, signal_handler)

# ============ –ó–ê–ü–£–°–ö ============

async def main():
    print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
    print("‚úÖ –î–∏—Å–ø–µ—Ç—á–µ—Ä —Å–æ–∑–¥–∞–Ω")
    print("‚úÖ –ü–∞—Ä—Å–µ—Ä –≥–æ—Ç–æ–≤")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ = db.get_subscribers_count()
    print(f"‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞. –ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: {–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ}")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–º–µ–Ω—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    print("üîÑ –ü–æ–ª—É—á–∞—é –∑–∞–º–µ–Ω—ã —Å —Å–∞–π—Ç–∞...")
    try:
        —É—Å–ø–µ—Ö = await –ø–∞—Ä—Å–µ—Ä.–æ–±–Ω–æ–≤–∏—Ç—å_–∑–∞–º–µ–Ω—ã()
        if —É—Å–ø–µ—Ö:
            if –ø–∞—Ä—Å–µ—Ä.–µ—Å—Ç—å_–∑–∞–º–µ–Ω—ã():
                print("‚úÖ –ó–∞–º–µ–Ω—ã –Ω–∞–π–¥–µ–Ω—ã!")
                —Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω()
                print(f"\nüîÑ –ó–∞–º–µ–Ω—ã:\n{—Ç–µ–∫—Å—Ç_–∑–∞–º–µ–Ω}")
            else:
                print("‚ÑπÔ∏è –ó–∞–º–µ–Ω –¥–ª—è –Ω–∞—à–µ–π –≥—Ä—É–ø–ø—ã –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
        else:
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–º–µ–Ω—ã")
    except Exception as e:
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞–º–µ–Ω: {e}")
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    —Å–µ–≥–æ–¥–Ω—è = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π_–¥–µ–Ω—å()
    –Ω–µ–¥–µ–ª—è = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ç–µ–∫—É—â—É—é_–Ω–µ–¥–µ–ª—é()
    print(f"üìÖ –°–µ–≥–æ–¥–Ω—è: {—Å–µ–≥–æ–¥–Ω—è} ({–Ω–µ–¥–µ–ª—è})")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç = –ø–∞—Ä—Å–µ—Ä.–ø–æ–ª—É—á–∏—Ç—å_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Å_–∑–∞–º–µ–Ω–∞–º–∏()
    print(f"\nüìä –ó–∞–ø—É—â–µ–Ω:\n{—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ_—Ç–µ–∫—Å—Ç[:200]}...")
    
    print("üöÄ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –û–∂–∏–¥–∞—é —Å–æ–æ–±—â–µ–Ω–∏—è...")
    print("‚úÖ –í—Å–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ")
    print("‚úÖ –ö–Ω–æ–ø–∫–∞ 'üîÑ –ó–∞–º–µ–Ω—ã' –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–º–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞")
    print("‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è sttec.yar.ru")
    print("‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–º–µ–Ω –≤ 14:00 –∏ 18:00")
    print("‚úÖ –£—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞—Å—Å—ã–ª–∫–∞ –≤ 7:00 —Å –∑–∞–º–µ–Ω–∞–º–∏")
    print("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤")
    print("‚úÖ –ö–Ω–æ–ø–∫–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞—Ç—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)")
    print("‚úÖ –ö–Ω–æ–ø–∫–∞ '‚ùì –ü–æ–º–æ—â—å' –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /help")
    print("‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ 30/31 –¥–Ω–µ–π, —Ñ–µ–≤—Ä–∞–ª—è –∏ –≤–∏—Å–æ–∫–æ—Å–Ω—ã—Ö –≥–æ–¥–æ–≤")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
    asyncio.create_task(–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫_—Ä–∞—Å—Å—ã–ª–∫–∏())
    asyncio.create_task(–æ–±–Ω–æ–≤–∏—Ç—å_–∑–∞–º–µ–Ω—ã_–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏())
    print("‚è∞ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –∑–∞–ø—É—â–µ–Ω—ã")
    
    # –í aiogram 3.x –ø–µ—Ä–µ–¥–∞–µ–º bot –≤ start_polling
    await dp.start_polling(bot)

if __name__ == '__main__':
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("\nüëã –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")